cat("~~ Model Production: Started ~~\n")
# Sets working directory to dataset location
setwd("c:/Users/thomaspickup/icloudDrive/Documents/University/CSC3002/Assignment/CSC3002-Project/Dataset")
cat("- Importing Libraries\n")
library(caret)
library(e1071)
library(Boruta)
# Sets the random seed to ensure repeatability
set.seed(3002)
cat("- Importing Dataset as CSV\n")
api.csv<-read.csv("api_results.csv")
sample.csv<-read.csv("sample_list.csv")
malware.csv<-read.csv("malware_types.csv")
# Merges together to create one data frame
ds<-merge(x=api.csv, y=sample.csv, by.x="SampleName", by.y="MD5hash")
mu<-merge(x=ds, y=malware.csv, by="MalwareID")
# Nullifies any identifying data
ds$SampleName<-NULL
ds$SampleID<-NULL
ds$Score<-NULL
# Changes malware ID to be a factor rather than an integer
ds$MalwareID = as.factor(ds$MalwareID)
# Gets the ID of the malwareID column
malwareID_Col <- ncol(ds)
lastFeature_Col <- malwareID_Col - 1
ds.final = ds
# Create index to split based on labels
index <- createDataPartition(ds.final$MalwareID, p=0.9, list=FALSE)
# Subset training set with index
ds.training <- ds.final[index,]
# Subset test set with index
ds.test <- ds.final[-index,]
cat("- Training Model\n")
model <- train(ds.training[, 1:lastFeature_Col], ds.training[, malwareID_Col], method='knn')
plot(model)
plot(model.matrix())
ggplot(model)
predict_this<-read.csv("product_api.csv")
# Sets working directory to dataset location
setwd("c:/Users/thomaspickup/icloudDrive/Documents/University/CSC3002/Assignment/CSC3002-Project/Production")
cat("- Importing Libraries\n")
# Sets the random seed to ensure repeatability
set.seed(3002)
cat("- Importing Dataset as CSV\n")
predict_this<-read.csv("product_api.csv")
View(predict_this)
# Sets the random seed to ensure repeatability
set.seed(3002)
cat("- Importing Dataset as CSV\n")
predict_this<-read.csv("product_api.csv")
# Nullifies any identifying data
predict_this$SampleName<-NULL
setwd("c:/Users/thomaspickup/icloudDrive/Documents/University/CSC3002/Assignment/CSC3002-Project/Model")
load("knn_model.rda")
cat("- Evaluating Model with test set\n")
predictions<-predict(object=model,predict_this)
cat("~~ Model Production: Complete ~~\n")
print(predictions)
View(ds)
setwd("c:/Users/thomaspickup/icloudDrive/Documents/University/CSC3002/Assignment/CSC3002-Project/DataSet")
malware_types<-read.csv("malware_types.csv")
View(malware_types)
prediction_text = malware_types[predictions, 2]
print(prediction_text)
cat(prediction_text)
prediction_text = malware_types[predictions[1], 2]
prediction_text = malware_types(predictions[1], 2)
prediction_text = levels(malware_types)[predictions[1], 2]
prediction_text = levels(malware_types)
cat("~~ Model Production: Complete ~~\n")
prediction_text = levels(malware_types)
prediction_text = levels(malware_types[predictions[1], 2])
prediction_text = levels(malware_types[, 2])[]
cat("~~ Model Production: Complete ~~\n")
prediction_text = levels(malware_types[, 2])[predictions]
cat(prediction_text)
